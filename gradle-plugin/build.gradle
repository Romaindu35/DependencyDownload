plugins {
    id 'java-gradle-plugin'
    id 'com.gradle.plugin-publish' version '0.14.0'
    id 'com.github.johnrengelman.shadow' version '7.0.0'
}

dependencies {
    compileOnly gradleApi()
    implementation project(':common')
}

jar.finalizedBy shadowJar

shadowJar {
    //noinspection GroovyAssignabilityCheck
    archiveClassifier = ''
}

gradlePlugin {
    plugins {
        runtimeDependencyDownload {
            id = 'dev.vankka.dependencydownload.plugin'
            displayName = 'DependencyDownload Plugin'
            description = 'A plugin to generate a metadata file for downloading dependencies during runtime'
            implementationClass = 'dev.vankka.dependencydownload.DependencyDownloadGradlePlugin'
        }
    }
}

pluginBundle {
    website = 'https://github.com/Vankka/DependencyDownload'
    vcsUrl = 'https://github.com/Vankka/DependencyDownload'
    tags = ['runtime', 'dependency', 'download']
}
